@using EgyptTouristWebSite.ViewModel;
@{
    ViewData["Title"] = "Home Page";
   
}
@model HomeViewModel

<div>
    
    <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel" data-bs-theme="dark" ">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner" >
        <div class="carousel-item  active" data-bs-interval="2000" style="height:450px">
            <imgcontainer>
            <img src="/Images/Hotel.png" class="d-block w-100" alt="Image1">
                </imgcontainer>
            <div class="carousel-caption d-none d-md-block" >
                <h4>First slide label</h4>
                <p>Some representative placeholder content for the first slide.</p>
           </div>
        </div>
        <div class="carousel-item" data-bs-interval="2000" style="height:450px">
            <imgcontainer>
            <img  src="/Images/Bank.jpg" class="d-block w-100" alt="Image" >
                </imgcontainer>
            <div class="carousel-caption d-none d-md-block">
                <h4>Second slide label</h4>
                <p>Some representative placeholder content for the second slide.</p>
            </div>
        </div>
        <div class="carousel-item" data-bs-interval="2000" style="height:450px">
            <imgcontainer>
            <img  src="/Images/Hotel.png" class="d-block w-100" alt="Image">
                </imgcontainer>
            <div class="carousel-caption d-none d-md-block" >
                <h4 >Third slide label</h4>
                <p>Some representative placeholder content for the third slide.</p>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>
</div>

<div class="row" style="margin-top:20px">
    <div class="col-3">
        <div id="list-scrollspy" class="list-group" style="display:flex; position:sticky;top:120px">
            <a class="list-group-item list-group-item-action" href="#accomms">Accommodations</a>
            <a class="list-group-item list-group-item-action" href="#places">Interesting Places</a>
            <a class="list-group-item list-group-item-action" href="#services">Services</a>
        </div>
    </div>
    <div class="col-9">
        <div data-bs-spy="scroll" data-bs-target="#list-scrollspy" data-bs-smooth-scroll="true" class="scrollspy" tabindex="0">
            <h4 id="accomms">Accommodation</h4>
            <div class="container" style="margin-bottom:20px">
                <div class="slider-container">
                    <div class="slider" id="@Model.accommodations-slider">
                        @foreach (var place in Model.accommodations)
                        {
                                                                            <div class="wrapper">
                                <div class="card_s">
                                            <img src="/Images/@place.Image" alt="" srcset="">
                                    <div class="descriptions">
                                                <h3 class="">@place.Name</h3>
                                        <p>
                                            @place.Description   </p>
                                                    <div class="rating">
                                            @for (int i = 0; i < place.Rate; i++)
                                            {
                                                        <span class="fa fa-star checked" style="color:gold"></span>
                                            }
                                            @for (int i = place.Rate; i < 5; i++)
                                            {
                                                        <span class="fa fa-star"></span>
                                            }
                                        </div>
                                                    <pr>@place.Price EGP</pr>
                                                                                                                    <botton>
                                                                    <a href="@Url.Action("Details", "Accommodation", new { id = place.Id })" class="btn btn-primary">Details</a>
                                                                </botton>
                                    </div>
                                </div>
                            </div>



@*                            <div class="card">
                                <img src="/Images/@place.Image" alt="@place.Name">
                                <div class="card-body">
                                    <h4>@place.Name</h4>
                                    <p>@place.Description</p>
                                    <div class="rating">
                                        @for (int i = 0; i < place.Rate; i++)
                                        {
                                            <span class="fa fa-star checked" style="color:gold"></span>
                                        }
                                        @for (int i = place.Rate; i < 5; i++)
                                        {
                                            <span class="fa fa-star"></span>
                                        }
                                    </div>
                                    <p>Price: @place.Price <strong>EGP</strong></p>
                                </div>
                            </div>*@

                        }
                    </div>
                    <div class="slider-controls">
                        <button class="slider-btn slider-prev-btn" data-slider="#@Model.accommodations-slider"><i class="fas fa-chevron-left"></i></button>
                        <button class="slider-btn slider-next-btn" data-slider="#@Model.accommodations-slider"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="location.href='@Url.Action("ShowAllPlaces", "Accommodation")'">View All</button>
            </div>
            <h4 id="places">Interesting Places</h4>
            <div class="container" style="margin-bottom:20px">
                <div class="slider-container">
                    <div class="slider" id="@Model.accommodations-slider">
                        @foreach (var place in Model.places)
                        {
                                   <div class="wrapper">
                                    <div class="card_s">
                                                <img src="/Images/@place.Image" alt="" srcset="">
                                        <div class="descriptions">
                                                    <h3 class="">@place.Name</h3>
                                            <p>
                                            @place.Description   </p>
                                                        <div class="rating">
                                            @for (int i = 0; i < place.Rate; i++)
                                            {
                                                                <span class="fa fa-star checked" style="color:gold"></span>
                                            }
                                            @for (int i = place.Rate; i < 5; i++)
                                            {
                                                                <span class="fa fa-star"></span>
                                            }
                                            </div>
                                                            <pr>Type: @place.Type.Type</pr>
                                                            <botton>
                                                            <a href="@Url.Action("Details", "InterestingPlace", new { id = place.Id })" class="btn btn-primary">Details</a>
                                                            </botton>
                                        </div>
                                    </div>
                                </div>



                           @* <div class="card">
                                <img src="/Images/@place.Image" alt="@place.Name">
                                <div class="card-body">
                                    <h4>@place.Name</h4>
                                    <p>@place.Description</p>
                                    <div class="rating">
                                        @for (int i = 0; i < place.Rate; i++)
                                        {
                                            <span class="fa fa-star checked" style="color:gold"></span>
                                        }
                                        @for (int i = place.Rate; i < 5; i++)
                                        {
                                            <span class="fa fa-star"></span>
                                        }
                                    </div>
                                    <p>Type: @place.Type.Type</p>
                                    <a href="@Url.Action("Details", "InterestingPlace", new { id = place.Id })" class="btn btn-primary">Details</a>
                                </div>
                            </div>*@

                        }
                    </div>
                    <div class="slider-controls">
                        <button class="slider-btn slider-prev-btn" data-slider="#@Model.accommodations-slider"><i class="fas fa-chevron-left"></i></button>
                        <button class="slider-btn slider-next-btn" data-slider="#@Model.accommodations-slider"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="location.href='@Url.Action("ShowAllPlaces", "Accommodation")'">View All</button>
            </div>
            <h4 id="services">Services</h4>
            <div class="container" style="margin-bottom:20px">
                <div class="slider-container">
                    <div class="slider" id="@Model.services-slider">
                        @foreach (var place in Model.services)
                        {
                                                                   <div class="wrapper">
                                        <div class="card_s">
                                                    <img src="/Images/@place.Image" alt="" srcset="">
                                            <div class="descriptions">
                                                        <h3 class="">@place.Name</h3>
                                                <p>
                                            @place.Description   </p>
                                                            <div class="rating">
                                            @for (int i = 0; i < place.Rate; i++)
                                            {
                                                                        <span class="fa fa-star checked" style="color:gold"></span>
                                            }
                                            @for (int i = place.Rate; i < 5; i++)
                                            {
                                                                        <span class="fa fa-star"></span>
                                            }
                                                </div>
                                                                <pr>Type: @place.Type.Type</pr>
                                                                <botton>
                                        <a href="@Url.Action("Details", "Service", new { id = place.Id })" class="btn btn-primary">Details</a>
                                                                    </botton>
                                            </div>
                                        </div>
                                    </div>



                           @* <div class="card">
                                <img src="/Images/@place.Image" alt="@place.Name">
                                <div class="card-body">
                                    <h4>@place.Name</h4>
                                    <p>@place.Description</p>
                                    <div class="rating">
                                        @for (int i = 0; i < place.Rate; i++)
                                        {
                                            <span class="fa fa-star checked" style="color:gold"></span>
                                        }
                                        @for (int i = place.Rate; i < 5; i++)
                                        {
                                            <span class="fa fa-star"></span>
                                        }
                                    </div>
                                    <p>@place.Type.Type</p>
                                    <a href="@Url.Action("Details", "Service", new { id = place.Id })" class="btn btn-primary">Details</a>
                                </div>
                            </div>*@

                        }
                    </div>
                    <div class="slider-controls">
                        <button class="slider-btn slider-prev-btn" data-slider="#@Model.accommodations-slider"><i class="fas fa-chevron-left"></i></button>
                        <button class="slider-btn slider-next-btn" data-slider="#@Model.accommodations-slider"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="location.href='@Url.Action("ShowAllServices", "Service")'">View All</button>
            </div>

        </div>
    </div>
</div>



<style>
     .slider-container {

/*        position: relative;
*/
    }

    .slider {
        overflow-x: scroll;


            white-space: nowrap;

/*        transition: 0.5s ease-in-out;
*/ 
    }

        .slider::-webkit-scrollbar {
            display: none; /* Add this to remove the scroll bar */
        }

       /* .slider .card {
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            transition: 0.3s;
            border-radius: 5px;
            width: 250px;
            margin: 10px;
            display: inline-block;
        }

            .slider .card:hover {
                box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
            }

            .slider .card img {
                border-radius: 5px 5px 0 0;
                width: 100%;
                height: 150px;
                object-fit: cover;
            }

            .slider .card .card-body {
                padding: 10px;
            }*/

    .slider-controls {
        display: block;
        width: 100%;
        display: flex;
        justify-content: space-between;
        z-index: 5;
    }

    .slider-btn {
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
        transition: color 0.3s;
    }

        .slider-btn:hover {
            color: #ccc;
        }

    .slider-prev-btn {
        color: gold;
        margin-left: 10px;
    }

    .slider-next-btn {
        color: gold;
        margin-right: 10px;
    }







.wrapper{
/*    position: absolute;
    top:50%;
    left:50%;*/
/*    transform: translate(-50%, -50%);
*/   
width:420px;

/*    max-width: 350px;
    height:auto;*/

   /* display: flex;
    flex-wrap: wrap;
    justify-content: space-between;*/

       display: inline-block;  /*test/**/

}
.card_s{
   /* flex: 1;
    flex-basis: 300px;
    flex-grow: 0;*/
    height: 400px;
    background: #fff;
    border: 2px solid #fff;
    box-shadow: 0px 4px 7px rgba(0,0,0,.5);
    cursor: pointer;
    transition: all .5s cubic-bezier(.8,.5,.2,1.4);
    overflow: hidden;

    position: relative;


}

.card_s img{
    width: 100%;
    height:100%;
    transition: all .5s cubic-bezier(.8,.5,.2,1.4);
}
.descriptions{

    position: absolute;

    top:0px;
    left:0px;

    background-color: rgba(255,255,255,.7);
    width:100%;
    height:100%;
    transition: all .7s ease-in-out;
    padding: 20px;
    box-sizing: border-box;
    clip-path: circle(0% at 100% 100%);
    white-space: normal;

}
.card_s:hover .descriptions{
    left:0px;
    transition: all .7s ease-in-out;
    clip-path: circle(75%);
}
.card_s:hover{
    transition: all .5s cubic-bezier(.8,.5,.2,1.4);
    box-shadow: 0px 2px 3px rgba(0,0,0,.3);
    transform: scale(.97);
}
.card_s:hover img{
    transition: all .5s cubic-bezier(.8,.5,.2,1.4);
    transform: scale(1.6) rotate(20deg);
    filter: blur(3px);
}
.card_s h3{
    color: #ff3838;
    letter-spacing: 1px;
    margin: 0px;
}
.card_s p{

    line-height: 24px;
    height: 180px;
    overflow-y: clip;
}
.card_s pr{

    display:block;
}
.card_s button{
    width: fit-content;
    height: 40px;
    cursor: pointer;
    border-style: none;
    background-color: #ff3838;
    color:#fff;
    font-size: 15px;
    outline: none;
    box-shadow: 0px 2px 3px rgba(0,0,0,.4);
    transition: all .5s ease-in-out;
}
.card_s button:hover{
    transform: scale(.95) translateX(-5px);
    transition: all .5s ease-in-out;
}



    /*.form-group{
        display:flex;
    }*/
</style>




@section Scripts{
    <script>
        const sliders = document.querySelectorAll('.slider');

        sliders.forEach(slider => {
            const prevBtn = slider.parentElement.querySelector('.slider-prev-btn');
            const nextBtn = slider.parentElement.querySelector('.slider-next-btn');

            let scrollAmount = 0;
            const cardWidth = slider.querySelector('.card_s').offsetWidth + 20;
            const cardsDisplayed = Math.floor(slider.offsetWidth / cardWidth);
                const totalCards = slider.querySelectorAll('.card_s').length;

            // Show prev and next buttons only if more cards than displayed
            if (totalCards > cardsDisplayed) {
                prevBtn.style.display = 'block';
                nextBtn.style.display = 'block';
            } else {
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'none';
            }

            // Prev and next butns functionality
            prevBtn.addEventListener('click', () => {
                if (scrollAmount !== 0) {
                    scrollAmount += cardWidth;
                    slider.scrollBy({ left: `-${cardWidth}`, behavior: "smooth" });
                }
            });

            nextBtn.addEventListener('click', () => {
                if (scrollAmount !== (slider.scrollWidth - slider.offsetWidth)) {
                    scrollAmount += cardWidth;
                    slider.scrollBy({ left: `${cardWidth}`, behavior: "smooth" });
                    console.log(cardWidth);
                }
            });

            slider.addEventListener('scroll', () => {
                scrollAmount = slider.scrollLeft;
            });
        });
    </script>
    
}